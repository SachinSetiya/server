create table t1(abc blob unique);
insert into t1 values(1),(2),(3),(4),(5),(11),(12),(31),(14),(15),(NULL)
,(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),
(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),
(NULL),(NULL),(NULL),(NULL),(NULL);
insert into t1 value(1);
ERROR 23000: Duplicate entry '1' for key 'abc'
explain select * from t1 where abc='31';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc	abc	13	const	1	
select * from t1 where abc='31';
abc
31
# in case of null we do not use any optimization;
explain select * from t1 where abc is  NULL;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ref	abc	abc	13	const	3	Using where
select * from t1 where abc is  NULL limit 1;
abc
NULL
#range query;
explain select * from t1 where abc >'1'  limit 1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	abc	NULL	NULL	NULL	36	Using where
select * from t1 where abc >'1' limit 1;
abc
2
explain select * from t1 where abc >'1' and abc <'4';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	abc	NULL	NULL	NULL	36	Using where
select * from t1 where abc >'1' and abc <'4';
abc
2
3
11
12
31
14
15
explain select * from t1 where abc ='15' or abc <'4' ;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	abc	NULL	NULL	NULL	36	Using where
select * from t1 where abc ='15' or abc <'4' ;
abc
1
2
3
11
12
31
14
15
drop table t1;
create table t1(abc blob unique, xyz int );
insert into t1 values(1,1),(2,1),(3,3),(4,1),(5,6),(NULL,3),(NULL,1),
(NULL,NULL),(11,11),(12,11),(31,31),
(14,1),(15,61),(NULL,32),(NULL,12),(NULL,NULL);
insert into t1 value(1,NULL);
ERROR 23000: Duplicate entry '1' for key 'abc'
explain select * from t1 where abc='15';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc	abc	13	const	1	
select * from t1 where abc= '15';
abc	xyz
15	61
explain select * from t1 where abc='15' and xyz ='61';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc	abc	13	const	1	
select * from t1 where abc= '15' and xyz ='61';
abc	xyz
15	61
explain select * from t1 where abc='1000';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	NULL	NULL	NULL	NULL	NULL	NULL	NULL	Impossible WHERE noticed after reading const tables
select * from t1 where abc= '1000';
abc	xyz
#now xyz has a value which is not present in table;
explain select * from t1 where abc='14' and xyz ='56';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	NULL	NULL	NULL	NULL	NULL	NULL	NULL	Impossible WHERE noticed after reading const tables
select * from t1 where abc='14' and xyz ='56';
abc	xyz
#range query(index not used, because it's a hash);
explain select * from t1 where abc >'5' limit 1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	abc	NULL	NULL	NULL	16	Using where
select * from t1 where abc >'5' limit 1;
abc	xyz
explain select * from t1 where abc='5' and xyz <'56';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc	abc	13	const	1	
select * from t1 where abc='5' and xyz <'56';
abc	xyz
5	6
explain select * from t1 where abc>='5' and xyz <'56';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	abc	NULL	NULL	NULL	16	Using where
select * from t1 where abc>='5' and xyz <'56';
abc	xyz
5	6
explain select * from t1 where abc>'5' and xyz ='56';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	abc	NULL	NULL	NULL	16	Using where
select * from t1 where abc>'5' and xyz ='56';
abc	xyz
drop table t1;
create table t1(abc blob unique, xyz blob unique );
insert into t1 values(1,1),(2,11),(3,31),(4,12),(5,63),(NULL,2),(NULL,NULL),
(91,19),(92,119),(93,391),(94,192),(95,693);
insert into t1 value(1,NULL);
ERROR 23000: Duplicate entry '1' for key 'abc'
explain select * from t1 where abc='1';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc	abc	13	const	1	
select * from t1 where abc='1';
abc	xyz
1	1
explain select * from t1 where xyz='1';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	xyz	xyz	13	const	1	
select * from t1 where xyz='1';
abc	xyz
1	1
explain select * from t1 where abc='5' and xyz='63';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc,xyz	abc	13	const	1	
select * from t1 where abc='5' and xyz='63';
abc	xyz
5	63
explain select * from t1 where xyz='63' and abc='5';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc,xyz	abc	13	const	1	
select * from t1 where xyz='63' and abc='5';
abc	xyz
5	63
explain select * from t1 where xyz='63' or abc='5';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	index_merge	abc,xyz	xyz,abc	13,13	NULL	2	Using sort_union(xyz,abc); Using where
select * from t1 where xyz='63' or abc='5';
abc	xyz
5	63
drop table t1;
